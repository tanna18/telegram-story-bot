# story_data.py

story = {
    "start": {
        "text": (
            "Парк поздним вечером пуст. Туман висит низко, скрывая землю. "
            "В этой тишине слышится странный, вибрирующий гул.\n\n"
            "Возле старого колодца стоит твой друг детства Марк. Свет его фонарика дрожит.\n"
            "Он поворачивается к тебе:\n"
            "— Ты тоже это слышишь?"
        ),
        "options": {
            "1": {"text": "Подойти ближе", "next_node": "meet_mark"},
            "2": {"text": "Остановиться на расстоянии", "next_node": "meet_mark"},
            "3": {"text": "Пройти мимо", "next_node": "meet_mark_recall"}
        }
    },

    "meet_mark_recall": {
        "text": (
            "Ты пытаешься пройти мимо, но Марк смотрит на тебя с надеждой.\n"
            "— Я же знаю, что могу на тебя положиться. Не оставляй меня одного здесь."
        ),
        "options": {
            "1": {"text": "Вернуться к Марку", "next_node": "meet_mark"}
        }
    },

    "meet_mark": {
        "text": (
            "Марк выдыхает с облегчением.\n"
            "— Я рад, что ты пришёл. Один я не справлюсь.\n"
            "— Ты чувствуешь этот гул?"
        ),
        "options": {
            "1": {"text": "Сказать, что чувствуешь вибрацию", "next_node": "shared_vibration"},
            "2": {"text": "Сказать, что ничего не чувствуешь", "next_node": "cold_distance"}
        }
    },

    "cold_distance": {
        "text": (
            "Марк смотрит на тебя с лёгкой грустью.\n"
            "— Я надеялся, что ты останешься рядом. Ты всегда был рядом раньше. "
            "Неужели сейчас я тебе не важен?"
        ),
        "options": {
            "1": {"text": "Спросить, что происходит", "next_node": "shared_vibration"},
            "2": {"text": "Согласиться быть с ним", "next_node": "yield_mark"}
        }
    },

    "shared_vibration": {
        "text": (
            "Марк делает шаг ближе.\n"
            "— Ты же мой друг детства. Только ты можешь быть со мной сейчас. "
            "Если ты уйдёшь, я останусь один, и может случиться что-то плохое."
        ),
        "options": {
            "1": {"text": "Спросить, как давно это происходит", "next_node": "mark_story"},
            "2": {"text": "Отстраниться и наблюдать", "next_node": "distance_shift"},
            "3": {"text": "Согласиться быть с ним", "next_node": "yield_mark"}
        }
    },

    "distance_shift": {
        "text": (
            "Ты делаешь шаг назад. Марк хватает твою руку.\n"
            "— Я доверяю только тебе. Если ты отойдёшь, я не знаю, что делать."
        ),
        "options": {
            "1": {"text": "Успокоить его и продолжить разговор", "next_node": "mark_story"},
            "2": {"text": "Согласиться с его просьбой", "next_node": "yield_mark"}
        }
    },

    "mark_story": {
        "text": (
            "Марк садится на край колодца.\n"
            "— Это началось около года назад. Сначала были просто звуки, потом мысли — чужие и непонятные. "
            "Сегодня гул зовёт иначе. Я боюсь остаться один."
        ),
        "options": {
            "1": {"text": "Спросить, чего он боится", "next_node": "fear_confession"},
            "2": {"text": "Прислушаться к Эху", "next_node": "echo_shift"},
            "3": {"text": "Согласиться быть с ним", "next_node": "yield_mark"}
        }
    },

    "fear_confession": {
        "text": (
            "— Я боюсь ночей, — говорит Марк. — Если я останусь один, может случиться что-то плохое. "
            "Ты можешь просто быть рядом? Ты мой единственный друг, кто может помочь."
        ),
        "options": {
            "1": {"text": "Согласиться идти с ним на своих условиях", "next_node": "studio_walk"},
            "2": {"text": "Остаться рядом, но на своём расстоянии", "next_node": "studio_walk"},
            "3": {"text": "Согласиться с его просьбой", "next_node": "yield_mark"}
        }
    },

    "echo_shift": {
        "text": (
            "Гул шепчет:\n"
            "«…не доверяй ему… он держит тебя… но мне нужен ты…»\n"
            "Марк спрашивает:\n"
            "— Что ты слышишь?"
        ),
        "options": {
            "1": {"text": "Сказать правду", "next_node": "echo_truth"},
            "2": {"text": "Сказать, что ничего не слышишь", "next_node": "fear_confession"},
            "3": {"text": "Согласиться с Марком", "next_node": "yield_mark"}
        }
    },

    "echo_truth": {
        "text": (
            "— Они предупреждают тебя? — Марк хмурится.\n"
            "— Если нас двое, мы сильнее. Я не могу справиться один, и ты же мой друг."
        ),
        "options": {
            "1": {"text": "Согласиться на своих условиях", "next_node": "studio_walk"},
            "2": {"text": "Сказать, что хочешь разобраться сам", "next_node": "echo_alone"},
            "3": {"text": "Согласиться с Марком", "next_node": "yield_mark"}
        }
    },

    "yield_mark": {
        "text": (
            "Ты соглашаешься со всеми просьбами Марка. Он улыбается с облегчением, обнимает тебя.\n"
            "Вы идёте вместе сквозь туман, подчиняясь его страхам и желаниям.\n"
            "Скоро Марк исчезает в тумане, а ты остаёшься один, понимая, что полностью поддался манипуляциям.\n"
            "Плохая концовка."
        ),
        "options": {}
    },

    "studio_walk": {
        "text": (
            "Вы идёте через туман. Шаги глухо звучат.\n"
            "— Только ты можешь быть со мной. Я знаю, что могу на тебя положиться."
        ),
        "options": {
            "1": {"text": "Сказать, что ты рядом, но не поддаваться на давление", "next_node": "studio_scene"},
            "2": {"text": "Отдалиться немного, но оставаться рядом", "next_node": "studio_scene"},
            "3": {"text": "Согласиться с его просьбой", "next_node": "yield_mark"}
        }
    },

    "studio_scene": {
        "text": (
            "Студия погружена в полумрак. Пахнет деревом и холодом.\n"
            "— Если ты не скажешь, что я с тобой, я останусь один и произойдёт что-то ужасное. "
            "Только ты можешь это предотвратить."
        ),
        "options": {
            "1": {"text": "Сказать, что ты рядом на своих условиях", "next_node": "threshold_shift"},
            "2": {"text": "Прислушаться к Эху", "next_node": "echo_deep_contact"},
            "3": {"text": "Согласиться с ним", "next_node": "yield_mark"}
        }
    },

    "echo_deep_contact": {
        "text": (
            "Гул почти человеческий:\n"
            "«…выбери меня…»\n"
            "— Ты не бросишь меня… правда? — Марк смотрит на тебя с надеждой."
        ),
        "options": {
            "1": {"text": "Сказать, что останешься с Марком на своих условиях", "next_node": "threshold_shift"},
            "2": {"text": "Ответить Эху: «Что ты хочешь?»", "next_node": "dark_draw"},
            "3": {"text": "Согласиться с ним", "next_node": "yield_mark"}
        }
    },

    "threshold_shift": {
        "text": (
            "Свет мерцает. Гул нервный.\n"
            "Марк хватается за твоё предплечье:\n"
            "— Подтверди, что я был с тобой."
        ),
        "options": {
            "1": {"text": "Пообещать на своих условиях", "next_node": "good_end"},
            "2": {"text": "Не обещать", "next_node": "neutral_end"},
            "3": {"text": "Согласиться с его просьбой", "next_node": "yield_mark"}
        }
    },

    "dark_draw": {
        "text": (
            "Ты шепчешь в пустоту:\n"
            "— Я слушаю.\n"
            "Гул сжимается вокруг.\n"
            "«…тогда выбери… один из вас…»"
        ),
        "options": {
            "1": {"text": "Отдать себя", "next_node": "self_sacrifice"},
            "2": {"text": "Отдать Марка", "next_node": "damnation"},
            "3": {"text": "Согласиться с Марком", "next_node": "yield_mark"}
        }
    },

    "self_sacrifice": {
        "text": (
            "Туман тянет вниз. Гул перекрывает дыхание.\n"
            "Ты исчезаешь в глубине. Марк кричит, но звук тонет.\n\n"
            "Тёмная концовка."
        ),
        "options": {}
    },

    "damnation": {
        "text": (
            "Марк исчезает в тумане. Гул стихает, оставляя пустоту.\n"
            "Худшая концовка."
        ),
        "options": {}
    },

    "bad_end": {
        "text": (
            "Ты подтверждаешь. Марк шепчет «спасибо», но через несколько дней исчезает.\n"
            "Плохая концовка."
        ),
        "options": {}
    },

    "neutral_end": {
        "text": (
            "Ты отвечаешь неясно. Марк уходит один.\n"
            "Гул постепенно затихает.\n"
            "Нейтральная концовка."
        ),
        "options": {}
    },

    "good_end": {
        "text": (
            "Ты честно подтверждаешь, что остаёшься рядом, но на своих условиях.\n"
            "Марк остаётся жив и цел, гул исчезает. Вы оба сохраните дружбу, "
            "и игрок не поддался на эмоциональное давление.\n"
            "Хорошая концовка."
        ),
        "options": {}
    }
}
